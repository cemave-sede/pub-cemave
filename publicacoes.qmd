---
title: "Publica√ß√µes do CEMAVE"
subtitle: "1978-Atual "
format:
  html:
    embed-resources: true
    toc: true
    toc-depth: 2
    theme: cosmo
    css: styles.css
    
execute:
  echo: false      # n√£o mostra o c√≥digo
  warning: false   # n√£o mostra avisos
  message: false   # n√£o mostra mensagens (ex: carregando pacotes)
  error: false     # n√£o exibe erros no HTML (opcional)
---

```{r carregamento}
library(readr)
library(dplyr)
library(reactable)
library(htmltools)
library(readr)
library(dplyr)
library(reactable)
library(stringr)

# Ler a tabela
#dados <- read_csv2("referencias.csv")

dados <- read_csv(
  file = "referencias.csv",
  locale = locale(encoding = "Windows-1252")
)

# Fun√ß√£o para adicionar √≠cone conforme tipo
# add_icon <- function(tipo) {
#   icon <- dplyr::case_when(
#     grepl("Artigo", tipo, ignore.case = TRUE) ~ "üìÑ",
#     grepl("Resumo", tipo, ignore.case = TRUE) ~ "üìù",
#     grepl("Livro", tipo, ignore.case = TRUE) ~ "üìö",
#     grepl("Disserta√ß√£o|Tese", tipo, ignore.case = TRUE) ~ "üéì",
#     TRUE ~ "üîπ"
#   )
#   paste(icon, tipo)
# }

# dados <- dados %>%
#   mutate(
#     Tipo = add_icon(Tipo)
#   )


# Converter markdown [**T√≠tulo**](link) ‚Üí <a href="link" target="_blank"><strong>T√≠tulo</strong></a>
dados <- dados %>%
  mutate(
    T√≠tulo = str_replace(T√≠tulo,
                         "\\[\\*\\*(.*?)\\*\\*\\]\\((.*?)\\)",
                         "<a href=\"\\2\" target=\"_blank\"><strong>\\1</strong></a>")
  )
```

```{r tabela}


    
cat("Total de publica√ß√µes:", nrow(dados), "\n")


library(DT)


dados <- dados %>% mutate(Ano = as.character(Ano))

datatable(
  dados,
  rownames = FALSE,        # remove coluna num√©rica autom√°tica
  escape = FALSE,          # preserva HTML (links) na coluna T√≠tulo
  filter = "top",          # cria inputs no topo (iremos customizar a do Ano)
  extensions = c("Buttons"),
  options = list(
    dom = 'Brtip',         # **remove** o 'f' (global search), mantendo Bot√µes (B), tabela (t), info/paging (ip)
    buttons = list(
      list(extend = "csv", text = "Download CSV"),
      list(extend = "excel", text = "Download Excel"),
      list(extend = "pdf", text = "Download PDF"),
      list(extend = "print", text = "Imprimir tabela")
    ),
    paging = FALSE,        # tabela cont√≠nua (sem pagina√ß√£o)
    info = TRUE,
    autoWidth = TRUE
    )
)



```